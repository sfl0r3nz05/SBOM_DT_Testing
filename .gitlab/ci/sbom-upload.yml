
# File: .gitlab/ci/sbom-upload.yml
.sbom_upload:
  tags:
    - sbom
  variables:
    DEPENDENCY_TRACK_URL: "192.168.64.138"
    DEPENDENCY_TRACK_PORT: 8080
    DEPENDENCY_TRACK_API_KEY: "odt_dx3lgquKjrVrUuBrvBqxfaT3whGn1wqw"
  script:
    - |
      curl -X "POST" "http://192.168.64.138:8080/api/v1/bom" \
      -H "Content-Type: multipart/form-data" \
      -H "X-Api-Key: odt_dx3lgquKjrVrUuBrvBqxfaT3whGn1wqw" \
      -F "autoCreate=true" \
      -F "projectName=gitlab-sbom" \
      -F "projectVersion=gitlab-sbom" \
      -F "bom=@source.json"
